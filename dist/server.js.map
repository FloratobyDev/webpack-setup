{"version":3,"file":"server.js","mappings":"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","sources":["webpack://monorepo-practice-webpack/./packages/server/node_modules/cors/lib/index.js","webpack://monorepo-practice-webpack/external commonjs \"express\"","webpack://monorepo-practice-webpack/external commonjs \"object-assign\"","webpack://monorepo-practice-webpack/external commonjs \"vary\"","webpack://monorepo-practice-webpack/external node-commonjs \"path\"","webpack://monorepo-practice-webpack/webpack/bootstrap","webpack://monorepo-practice-webpack/./packages/server/src/index.js"],"sourcesContent":["(function () {\n\n  'use strict';\n\n  var assign = require('object-assign');\n  var vary = require('vary');\n\n  var defaults = {\n    origin: '*',\n    methods: 'GET,HEAD,PUT,PATCH,POST,DELETE',\n    preflightContinue: false,\n    optionsSuccessStatus: 204\n  };\n\n  function isString(s) {\n    return typeof s === 'string' || s instanceof String;\n  }\n\n  function isOriginAllowed(origin, allowedOrigin) {\n    if (Array.isArray(allowedOrigin)) {\n      for (var i = 0; i < allowedOrigin.length; ++i) {\n        if (isOriginAllowed(origin, allowedOrigin[i])) {\n          return true;\n        }\n      }\n      return false;\n    } else if (isString(allowedOrigin)) {\n      return origin === allowedOrigin;\n    } else if (allowedOrigin instanceof RegExp) {\n      return allowedOrigin.test(origin);\n    } else {\n      return !!allowedOrigin;\n    }\n  }\n\n  function configureOrigin(options, req) {\n    var requestOrigin = req.headers.origin,\n      headers = [],\n      isAllowed;\n\n    if (!options.origin || options.origin === '*') {\n      // allow any origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: '*'\n      }]);\n    } else if (isString(options.origin)) {\n      // fixed origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: options.origin\n      }]);\n      headers.push([{\n        key: 'Vary',\n        value: 'Origin'\n      }]);\n    } else {\n      isAllowed = isOriginAllowed(requestOrigin, options.origin);\n      // reflect origin\n      headers.push([{\n        key: 'Access-Control-Allow-Origin',\n        value: isAllowed ? requestOrigin : false\n      }]);\n      headers.push([{\n        key: 'Vary',\n        value: 'Origin'\n      }]);\n    }\n\n    return headers;\n  }\n\n  function configureMethods(options) {\n    var methods = options.methods;\n    if (methods.join) {\n      methods = options.methods.join(','); // .methods is an array, so turn it into a string\n    }\n    return {\n      key: 'Access-Control-Allow-Methods',\n      value: methods\n    };\n  }\n\n  function configureCredentials(options) {\n    if (options.credentials === true) {\n      return {\n        key: 'Access-Control-Allow-Credentials',\n        value: 'true'\n      };\n    }\n    return null;\n  }\n\n  function configureAllowedHeaders(options, req) {\n    var allowedHeaders = options.allowedHeaders || options.headers;\n    var headers = [];\n\n    if (!allowedHeaders) {\n      allowedHeaders = req.headers['access-control-request-headers']; // .headers wasn't specified, so reflect the request headers\n      headers.push([{\n        key: 'Vary',\n        value: 'Access-Control-Request-Headers'\n      }]);\n    } else if (allowedHeaders.join) {\n      allowedHeaders = allowedHeaders.join(','); // .headers is an array, so turn it into a string\n    }\n    if (allowedHeaders && allowedHeaders.length) {\n      headers.push([{\n        key: 'Access-Control-Allow-Headers',\n        value: allowedHeaders\n      }]);\n    }\n\n    return headers;\n  }\n\n  function configureExposedHeaders(options) {\n    var headers = options.exposedHeaders;\n    if (!headers) {\n      return null;\n    } else if (headers.join) {\n      headers = headers.join(','); // .headers is an array, so turn it into a string\n    }\n    if (headers && headers.length) {\n      return {\n        key: 'Access-Control-Expose-Headers',\n        value: headers\n      };\n    }\n    return null;\n  }\n\n  function configureMaxAge(options) {\n    var maxAge = (typeof options.maxAge === 'number' || options.maxAge) && options.maxAge.toString()\n    if (maxAge && maxAge.length) {\n      return {\n        key: 'Access-Control-Max-Age',\n        value: maxAge\n      };\n    }\n    return null;\n  }\n\n  function applyHeaders(headers, res) {\n    for (var i = 0, n = headers.length; i < n; i++) {\n      var header = headers[i];\n      if (header) {\n        if (Array.isArray(header)) {\n          applyHeaders(header, res);\n        } else if (header.key === 'Vary' && header.value) {\n          vary(res, header.value);\n        } else if (header.value) {\n          res.setHeader(header.key, header.value);\n        }\n      }\n    }\n  }\n\n  function cors(options, req, res, next) {\n    var headers = [],\n      method = req.method && req.method.toUpperCase && req.method.toUpperCase();\n\n    if (method === 'OPTIONS') {\n      // preflight\n      headers.push(configureOrigin(options, req));\n      headers.push(configureCredentials(options, req));\n      headers.push(configureMethods(options, req));\n      headers.push(configureAllowedHeaders(options, req));\n      headers.push(configureMaxAge(options, req));\n      headers.push(configureExposedHeaders(options, req));\n      applyHeaders(headers, res);\n\n      if (options.preflightContinue) {\n        next();\n      } else {\n        // Safari (and potentially other browsers) need content-length 0,\n        //   for 204 or they just hang waiting for a body\n        res.statusCode = options.optionsSuccessStatus;\n        res.setHeader('Content-Length', '0');\n        res.end();\n      }\n    } else {\n      // actual response\n      headers.push(configureOrigin(options, req));\n      headers.push(configureCredentials(options, req));\n      headers.push(configureExposedHeaders(options, req));\n      applyHeaders(headers, res);\n      next();\n    }\n  }\n\n  function middlewareWrapper(o) {\n    // if options are static (either via defaults or custom options passed in), wrap in a function\n    var optionsCallback = null;\n    if (typeof o === 'function') {\n      optionsCallback = o;\n    } else {\n      optionsCallback = function (req, cb) {\n        cb(null, o);\n      };\n    }\n\n    return function corsMiddleware(req, res, next) {\n      optionsCallback(req, function (err, options) {\n        if (err) {\n          next(err);\n        } else {\n          var corsOptions = assign({}, defaults, options);\n          var originCallback = null;\n          if (corsOptions.origin && typeof corsOptions.origin === 'function') {\n            originCallback = corsOptions.origin;\n          } else if (corsOptions.origin) {\n            originCallback = function (origin, cb) {\n              cb(null, corsOptions.origin);\n            };\n          }\n\n          if (originCallback) {\n            originCallback(req.headers.origin, function (err2, origin) {\n              if (err2 || !origin) {\n                next(err2);\n              } else {\n                corsOptions.origin = origin;\n                cors(corsOptions, req, res, next);\n              }\n            });\n          } else {\n            next();\n          }\n        }\n      });\n    };\n  }\n\n  // can pass either an options hash, an options delegate, or nothing\n  module.exports = middlewareWrapper;\n\n}());\n","module.exports = require(\"express\");","module.exports = require(\"object-assign\");","module.exports = require(\"vary\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const express = require('express');\r\nconst path = require('path');\r\nconst app = express();\r\nconst cors = require('cors');\r\n// Serve static files from the React app\r\nif(process.env.NODE_ENV === 'development') {\r\n  app.use(cors());\r\n}\r\n\r\nif(process.env.NODE_ENV === 'production') {\r\n  app.use(express.static('public'));\r\n}\r\n\r\napp.get('/api/hello', (req, res) => {\r\n  res.json({ message: 'Hello from server!' });\r\n});\r\n\r\napp.get('*', (req, res) => {\r\n  res.sendFile(path.join(__dirname, '../public', 'index.html'));\r\n});\r\n\r\nconst PORT = process.env.PORT || 3000;\r\napp.listen(PORT, () => {\r\n  console.log(`Server is running on http://localhost:${PORT}`);\r\n});\r\n"],"names":["assign","vary","defaults","origin","methods","preflightContinue","optionsSuccessStatus","isString","s","String","isOriginAllowed","allowedOrigin","Array","isArray","i","length","RegExp","test","configureOrigin","options","req","isAllowed","requestOrigin","headers","push","key","value","configureCredentials","credentials","configureExposedHeaders","exposedHeaders","join","applyHeaders","res","n","header","setHeader","module","exports","o","optionsCallback","cb","next","err","corsOptions","originCallback","err2","method","toUpperCase","configureMethods","allowedHeaders","configureAllowedHeaders","maxAge","toString","configureMaxAge","statusCode","end","cors","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","express","path","app","use","static","get","json","message","sendFile","__dirname","PORT","process","env","listen","console","log"],"sourceRoot":""}